<!DOCTYPE html>
<html>
<head>
    <title></title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js" type="text/javascript"></script>
    <script src="http://ajax.aspnetcdn.com/ajax/signalr/jquery.signalr-2.2.0.min.js" type="text/javascript"></script>
    <script src="signalr/hubs"></script>
    <script type="text/javascript">
        $(function () {
            console.log('Connecting to blueApp');

            //Create hub connection
            var connection = $.connection.hub;
            var chatHub = $.connection.blueApp;
            chatHub.logging = true;

            //Handle a broadcast
            chatHub.client.broadcast = function (broadcastMessage) {
                console.log(broadcastMessage);
            };

            //connection.url = 'http://blue-app-server.azurewebsites.net/signalr';
            console.log(connection.url);

            connection.start()
            .done(function () {
                console.log('Connected to signalR');
                $('#sendmessage').click(function () {
                    console.log('Attempting push to signalR');
                    //Call the hub server send
                    chatHub.server.send('A Message from ' + $('#username'));
                });
            })
            .fail(function(error){
                console.log('Could not connect');
                console.log(error)
            });
        });
    </script>
</head>
<body>
    <input type="text" id="username"/>
    <input type="button" id="sendmessage" value="Send" />
</body>
</html>
